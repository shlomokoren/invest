2024-09-21 10:27:35,607 - DEBUG - Running function: <module>
2024-09-21 10:34:45,949 - DEBUG - Running function: <module>
2024-09-21 10:34:45,954 - DEBUG - Starting new HTTPS connection (1): financialmodelingprep.com:443
2024-09-21 10:34:46,557 - DEBUG - https://financialmodelingprep.com:443 "GET /api/v3/technical_indicator/1day/MSI?type=sma&period=150&apikey=XOdeeszqGm4RohYI1hZH1dJb92ALCFZN HTTP/11" 429 150
2024-09-21 10:37:33,525 - DEBUG - Running function: get_general_parameters
2024-09-21 10:38:10,610 - DEBUG - Running function: get_general_parameters()
2024-09-21 10:41:46,059 - DEBUG - Running function: get_general_parameters()
2024-09-21 10:41:46,061 - DEBUG - Running function: maRule()
2024-09-21 10:41:46,063 - DEBUG - Starting new HTTPS connection (1): financialmodelingprep.com:443
2024-09-21 10:41:46,665 - DEBUG - https://financialmodelingprep.com:443 "GET /api/v3/technical_indicator/1day/MSI?type=sma&period=150&apikey=XOdeeszqGm4RohYI1hZH1dJb92ALCFZN HTTP/11" 429 150
2024-09-21 10:44:15,263 - DEBUG - Running function: get_general_parameters()
2024-09-21 10:44:15,264 - DEBUG - Running function: maRule()
2024-09-21 10:44:15,270 - DEBUG - Starting new HTTPS connection (1): financialmodelingprep.com:443
2024-09-21 10:44:15,924 - DEBUG - https://financialmodelingprep.com:443 "GET /api/v3/technical_indicator/1day/MSI?type=sma&period=150&apikey=XOdeeszqGm4RohYI1hZH1dJb92ALCFZN HTTP/11" 429 150
2024-09-21 10:44:34,929 - DEBUG - Encoding detection: ascii is most likely the one.
2024-09-21 10:48:59,060 - DEBUG - Running function: get_general_parameters()
2024-09-21 10:48:59,061 - DEBUG - Running function: maRule()
2024-09-21 10:48:59,064 - DEBUG - Starting new HTTPS connection (1): financialmodelingprep.com:443
2024-09-21 10:48:59,771 - DEBUG - https://financialmodelingprep.com:443 "GET /api/v3/technical_indicator/1day/MSI?type=sma&period=150&apikey=XOdeeszqGm4RohYI1hZH1dJb92ALCFZN HTTP/11" 429 150
2024-09-21 10:49:24,753 - DEBUG - Running function: get_general_parameters()
2024-09-21 10:49:24,755 - DEBUG - Running function: maRule()
2024-09-21 10:49:24,759 - DEBUG - Starting new HTTPS connection (1): financialmodelingprep.com:443
2024-09-21 10:49:25,320 - DEBUG - https://financialmodelingprep.com:443 "GET /api/v3/technical_indicator/1day/MSI?type=sma&period=150&apikey=XOdeeszqGm4RohYI1hZH1dJb92ALCFZN HTTP/11" 429 150
2024-09-21 10:50:06,179 - DEBUG - Running function: get_general_parameters()
2024-09-21 10:50:06,180 - DEBUG - Running function: maRule()
2024-09-21 10:50:06,183 - DEBUG - Starting new HTTPS connection (1): financialmodelingprep.com:443
2024-09-21 10:50:06,796 - DEBUG - https://financialmodelingprep.com:443 "GET /api/v3/technical_indicator/1day/MSI?type=sma&period=150&apikey=XOdeeszqGm4RohYI1hZH1dJb92ALCFZN HTTP/11" 429 150
2024-09-21 10:50:06,796 - INFO - faile to get financialmodelingprep sma value
2024-09-21 10:50:06,796 - INFO - {
  "Error Message": "Limit Reach . Please upgrade your plan or visit our documentation for more details at https://site.financialmodelingprep.com/"
}
2024-09-21 12:32:54,489 - DEBUG - Running function: get_general_parameters()
2024-09-21 12:32:54,493 - DEBUG - Running function: maRule()
2024-09-21 12:32:54,493 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 12:32:54,493 - DEBUG - Entering download()
2024-09-21 12:32:54,493 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 12:32:54,494 - DEBUG -  Entering history()
2024-09-21 12:32:54,508 - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2024-09-21 12:32:54,508 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSI', 1, 0])
2024-09-21 12:32:54,570 - DEBUG -   Entering history()
2024-09-21 12:32:54,570 - DEBUG - MSI: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 12:32:54,570 - DEBUG -    Entering get()
2024-09-21 12:32:54,571 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSI
2024-09-21 12:32:54,571 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 12:32:54,572 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 12:32:54,572 - DEBUG - cookie_mode = 'basic'
2024-09-21 12:32:54,572 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 12:32:54,579 - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2024-09-21 12:32:54,579 - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2024-09-21 12:32:54,580 - DEBUG - loaded persistent cookie
2024-09-21 12:32:54,580 - DEBUG - reusing cookie
2024-09-21 12:32:54,585 - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2024-09-21 12:32:54,855 - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/11" 200 11
2024-09-21 12:32:54,856 - DEBUG - crumb = 'p0LI8r.C.zN'
2024-09-21 12:32:54,856 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 12:32:54,856 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 12:32:54,857 - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2024-09-21 12:32:55,173 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSI?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 12:32:55,177 - DEBUG - response code=200
2024-09-21 12:32:55,177 - DEBUG -    Exiting get()
2024-09-21 12:32:55,199 - DEBUG - MSI: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:02
2024-09-21 12:32:55,218 - DEBUG - MSI: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:02-04:00
2024-09-21 12:32:55,251 - DEBUG - MSI: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 12:32:55,260 - DEBUG - MSI: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 12:32:55,260 - DEBUG -   Exiting history()
2024-09-21 12:32:55,260 - DEBUG -  Exiting history()
2024-09-21 12:32:55,261 - DEBUG - Exiting download()
2024-09-21 12:35:00,578 - DEBUG - Running function: get_general_parameters()
2024-09-21 12:35:00,580 - DEBUG - Running function: maRule()
2024-09-21 12:35:12,361 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 12:35:12,361 - DEBUG - Entering download()
2024-09-21 12:35:12,362 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 12:35:12,364 - DEBUG -  Entering history()
2024-09-21 12:35:12,372 - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2024-09-21 12:35:12,378 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSI', 1, 0])
2024-09-21 12:35:12,786 - DEBUG -   Entering history()
2024-09-21 12:35:12,787 - DEBUG - MSI: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 12:35:12,787 - DEBUG -    Entering get()
2024-09-21 12:35:12,787 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSI
2024-09-21 12:35:12,788 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 12:35:12,788 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 12:35:12,788 - DEBUG - cookie_mode = 'basic'
2024-09-21 12:35:12,788 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 12:35:12,794 - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2024-09-21 12:35:12,798 - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2024-09-21 12:35:12,800 - DEBUG - loaded persistent cookie
2024-09-21 12:35:12,801 - DEBUG - reusing cookie
2024-09-21 12:35:12,822 - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2024-09-21 12:35:13,119 - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/11" 200 11
2024-09-21 12:35:13,126 - DEBUG - crumb = 'p0LI8r.C.zN'
2024-09-21 12:35:13,126 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 12:35:13,127 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 12:35:13,143 - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2024-09-21 12:35:13,509 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSI?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 12:35:13,516 - DEBUG - response code=200
2024-09-21 12:35:13,516 - DEBUG -    Exiting get()
2024-09-21 12:35:13,528 - DEBUG - MSI: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:02
2024-09-21 12:35:13,549 - DEBUG - MSI: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:02-04:00
2024-09-21 12:35:13,603 - DEBUG - MSI: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 12:35:13,630 - DEBUG - MSI: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 12:35:13,630 - DEBUG -   Exiting history()
2024-09-21 12:35:13,630 - DEBUG -  Exiting history()
2024-09-21 12:35:13,631 - DEBUG - Exiting download()
2024-09-21 12:41:22,824 - DEBUG - Running function: get_general_parameters()
2024-09-21 12:41:22,832 - DEBUG - Running function: maRule()
2024-09-21 12:41:28,318 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 12:41:28,741 - DEBUG - Entering download()
2024-09-21 12:41:28,745 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 12:41:28,754 - DEBUG -  Entering history()
2024-09-21 12:41:35,065 - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2024-09-21 12:41:35,075 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSI', 1, 0])
2024-09-21 12:41:35,827 - DEBUG -   Entering history()
2024-09-21 12:41:35,827 - DEBUG - MSI: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 12:41:35,827 - DEBUG -    Entering get()
2024-09-21 12:41:35,828 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSI
2024-09-21 12:41:35,828 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 12:41:35,828 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 12:41:35,828 - DEBUG - cookie_mode = 'basic'
2024-09-21 12:41:35,829 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 12:41:38,661 - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2024-09-21 12:41:38,669 - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2024-09-21 12:41:38,961 - DEBUG - loaded persistent cookie
2024-09-21 12:41:38,962 - DEBUG - reusing cookie
2024-09-21 12:41:39,481 - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2024-09-21 12:41:48,160 - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/11" 200 11
2024-09-21 12:41:48,164 - DEBUG - crumb = 'p0LI8r.C.zN'
2024-09-21 12:41:48,164 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 12:41:48,164 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 12:41:48,179 - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2024-09-21 12:41:48,488 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSI?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 12:41:48,494 - DEBUG - response code=200
2024-09-21 12:41:48,494 - DEBUG -    Exiting get()
2024-09-21 12:41:48,530 - DEBUG - MSI: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:02
2024-09-21 12:41:48,559 - DEBUG - MSI: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:02-04:00
2024-09-21 12:41:48,657 - DEBUG - MSI: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 12:41:48,725 - DEBUG - MSI: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 12:41:48,726 - DEBUG -   Exiting history()
2024-09-21 12:41:48,727 - DEBUG -  Exiting history()
2024-09-21 12:41:48,729 - DEBUG - Exiting download()
2024-09-21 12:50:31,235 - DEBUG - Running function: get_general_parameters()
2024-09-21 12:50:31,268 - DEBUG - Running function: maRule()
2024-09-21 12:50:36,202 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 12:50:36,204 - DEBUG - Entering download()
2024-09-21 12:50:36,204 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 12:50:36,208 - DEBUG -  Entering history()
2024-09-21 12:50:36,237 - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2024-09-21 12:50:36,241 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSI', 1, 0])
2024-09-21 12:50:36,827 - DEBUG -   Entering history()
2024-09-21 12:50:36,827 - DEBUG - MSI: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 12:50:36,828 - DEBUG -    Entering get()
2024-09-21 12:50:36,828 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSI
2024-09-21 12:50:36,828 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 12:50:36,829 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 12:50:36,829 - DEBUG - cookie_mode = 'basic'
2024-09-21 12:50:36,830 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 12:50:36,842 - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2024-09-21 12:50:36,850 - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2024-09-21 12:50:36,852 - DEBUG - loaded persistent cookie
2024-09-21 12:50:36,852 - DEBUG - reusing cookie
2024-09-21 12:50:36,868 - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2024-09-21 12:50:37,203 - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/11" 200 11
2024-09-21 12:50:37,207 - DEBUG - crumb = 'p0LI8r.C.zN'
2024-09-21 12:50:37,207 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 12:50:37,207 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 12:50:37,220 - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2024-09-21 12:50:37,563 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSI?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 12:50:37,572 - DEBUG - response code=200
2024-09-21 12:50:37,572 - DEBUG -    Exiting get()
2024-09-21 12:50:37,589 - DEBUG - MSI: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:02
2024-09-21 12:50:37,611 - DEBUG - MSI: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:02-04:00
2024-09-21 12:50:37,675 - DEBUG - MSI: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 12:50:37,710 - DEBUG - MSI: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 12:50:37,711 - DEBUG -   Exiting history()
2024-09-21 12:50:37,711 - DEBUG -  Exiting history()
2024-09-21 12:50:37,711 - DEBUG - Exiting download()
2024-09-21 13:03:34,169 - DEBUG - Running function: get_general_parameters()
2024-09-21 13:03:34,172 - DEBUG - Running function: maRule()
2024-09-21 13:03:37,772 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:03:37,773 - DEBUG - Entering download()
2024-09-21 13:03:37,774 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:03:37,777 - DEBUG -  Entering history()
2024-09-21 13:03:37,801 - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2024-09-21 13:03:37,805 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSI', 1, 0])
2024-09-21 13:03:38,505 - DEBUG -   Entering history()
2024-09-21 13:03:38,505 - DEBUG - MSI: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:03:38,505 - DEBUG -    Entering get()
2024-09-21 13:03:38,506 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSI
2024-09-21 13:03:38,506 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:03:38,506 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:03:38,506 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:03:38,507 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:03:38,512 - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2024-09-21 13:03:38,517 - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2024-09-21 13:03:38,518 - DEBUG - loaded persistent cookie
2024-09-21 13:03:38,518 - DEBUG - reusing cookie
2024-09-21 13:03:38,534 - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2024-09-21 13:03:38,833 - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/11" 200 11
2024-09-21 13:03:38,837 - DEBUG - crumb = 'p0LI8r.C.zN'
2024-09-21 13:03:38,838 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:03:38,838 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:03:38,852 - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2024-09-21 13:03:39,205 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSI?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:03:39,215 - DEBUG - response code=200
2024-09-21 13:03:39,215 - DEBUG -    Exiting get()
2024-09-21 13:03:39,226 - DEBUG - MSI: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:02
2024-09-21 13:03:39,247 - DEBUG - MSI: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:02-04:00
2024-09-21 13:03:39,305 - DEBUG - MSI: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:03:39,338 - DEBUG - MSI: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:03:39,339 - DEBUG -   Exiting history()
2024-09-21 13:03:39,339 - DEBUG -  Exiting history()
2024-09-21 13:03:39,340 - DEBUG - Exiting download()
2024-09-21 13:03:58,136 - DEBUG - Running function: percentage_difference()
2024-09-21 13:05:32,835 - DEBUG - Running function: get_general_parameters()
2024-09-21 13:05:32,836 - DEBUG - Running function: maRule()
2024-09-21 13:05:32,836 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:05:32,836 - DEBUG - Entering download()
2024-09-21 13:05:32,836 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:05:32,837 - DEBUG -  Entering history()
2024-09-21 13:05:32,839 - DEBUG - ('CREATE TABLE IF NOT EXISTS "_kv" ("key" VARCHAR(255) NOT NULL PRIMARY KEY, "value" VARCHAR(255)) WITHOUT ROWID', [])
2024-09-21 13:05:32,839 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSI', 1, 0])
2024-09-21 13:05:32,896 - DEBUG -   Entering history()
2024-09-21 13:05:32,896 - DEBUG - MSI: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:05:32,896 - DEBUG -    Entering get()
2024-09-21 13:05:32,896 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSI
2024-09-21 13:05:32,897 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:05:32,897 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:05:32,897 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:05:32,897 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:05:32,899 - DEBUG - ('CREATE TABLE IF NOT EXISTS "_cookieschema" ("strategy" VARCHAR(255) NOT NULL PRIMARY KEY, "fetch_date" DATETIME NOT NULL, "cookie_bytes" BLOB NOT NULL) WITHOUT ROWID', [])
2024-09-21 13:05:32,899 - DEBUG - ('SELECT "t1"."strategy", "t1"."fetch_date", "t1"."cookie_bytes" FROM "_cookieschema" AS "t1" WHERE ("t1"."strategy" = ?) LIMIT ? OFFSET ?', ['basic', 1, 0])
2024-09-21 13:05:32,899 - DEBUG - loaded persistent cookie
2024-09-21 13:05:32,900 - DEBUG - reusing cookie
2024-09-21 13:05:32,903 - DEBUG - Starting new HTTPS connection (1): query1.finance.yahoo.com:443
2024-09-21 13:05:33,234 - DEBUG - https://query1.finance.yahoo.com:443 "GET /v1/test/getcrumb HTTP/11" 200 11
2024-09-21 13:05:33,234 - DEBUG - crumb = 'p0LI8r.C.zN'
2024-09-21 13:05:33,235 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:05:33,235 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:05:33,237 - DEBUG - Starting new HTTPS connection (1): query2.finance.yahoo.com:443
2024-09-21 13:05:33,574 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSI?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:05:33,575 - DEBUG - response code=200
2024-09-21 13:05:33,575 - DEBUG -    Exiting get()
2024-09-21 13:05:33,579 - DEBUG - MSI: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:02
2024-09-21 13:05:33,591 - DEBUG - MSI: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:02-04:00
2024-09-21 13:05:33,603 - DEBUG - MSI: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:05:33,607 - DEBUG - MSI: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:05:33,607 - DEBUG -   Exiting history()
2024-09-21 13:05:33,607 - DEBUG -  Exiting history()
2024-09-21 13:05:33,607 - DEBUG - Exiting download()
2024-09-21 13:05:33,609 - DEBUG - Running function: percentage_difference()
2024-09-21 13:05:33,609 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:05:33,609 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:05:33,638 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:05:33,668 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:05:33,669 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:05:33,843 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:05:33,852 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:05:34,458 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:05:34,466 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:05:35,580 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:05:36,278 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:05:36,998 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:05:37,842 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:05:38,663 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:05:38,664 - DEBUG - Running function: maRule()
2024-09-21 13:05:38,665 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:05:38,665 - DEBUG - Entering download()
2024-09-21 13:05:38,665 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:05:38,665 - DEBUG -  Entering history()
2024-09-21 13:05:38,666 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NVDA', 1, 0])
2024-09-21 13:05:38,666 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:05:38,666 - DEBUG -    Entering get()
2024-09-21 13:05:38,667 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NVDA
2024-09-21 13:05:38,667 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:05:38,667 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:05:38,667 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:05:38,667 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:05:38,667 - DEBUG - reusing cookie
2024-09-21 13:05:38,668 - DEBUG - reusing crumb
2024-09-21 13:05:38,668 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:05:38,668 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:05:38,782 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NVDA?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1187
2024-09-21 13:05:38,784 - DEBUG - response code=200
2024-09-21 13:05:38,785 - DEBUG -    Exiting get()
2024-09-21 13:05:38,786 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:05:38,787 - DEBUG - ('BEGIN', None)
2024-09-21 13:05:38,789 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['NVDA', 'America/New_York'])
2024-09-21 13:05:38,799 - DEBUG -   Entering history()
2024-09-21 13:05:38,800 - DEBUG - NVDA: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:05:38,800 - DEBUG -    Entering get()
2024-09-21 13:05:38,800 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NVDA
2024-09-21 13:05:38,800 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:05:38,801 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:05:38,801 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:05:38,801 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:05:38,801 - DEBUG - reusing cookie
2024-09-21 13:05:38,801 - DEBUG - reusing crumb
2024-09-21 13:05:38,801 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:05:38,801 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:05:38,939 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NVDA?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:05:38,943 - DEBUG - response code=200
2024-09-21 13:05:38,943 - DEBUG -    Exiting get()
2024-09-21 13:05:38,946 - DEBUG - NVDA: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:01
2024-09-21 13:05:38,948 - DEBUG - NVDA: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:01-04:00
2024-09-21 13:05:38,961 - DEBUG - NVDA: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:05:38,967 - DEBUG - NVDA: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:05:38,967 - DEBUG -   Exiting history()
2024-09-21 13:05:38,967 - DEBUG -  Exiting history()
2024-09-21 13:05:38,968 - DEBUG - Exiting download()
2024-09-21 13:05:38,970 - DEBUG - Running function: percentage_difference()
2024-09-21 13:05:38,971 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:05:38,971 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:05:38,974 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:05:39,012 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:05:39,013 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:05:39,188 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:05:39,190 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:05:39,735 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:05:39,740 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:05:40,594 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:05:41,279 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:05:42,003 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:05:42,750 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:05:43,517 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:05:43,524 - DEBUG - Running function: maRule()
2024-09-21 13:05:43,525 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:05:43,526 - DEBUG - Entering download()
2024-09-21 13:05:43,527 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:05:43,529 - DEBUG -  Entering history()
2024-09-21 13:05:43,532 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['ORCL', 1, 0])
2024-09-21 13:05:43,534 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:05:43,535 - DEBUG -    Entering get()
2024-09-21 13:05:43,536 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/ORCL
2024-09-21 13:05:43,537 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:05:43,537 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:05:43,537 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:05:43,538 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:05:43,538 - DEBUG - reusing cookie
2024-09-21 13:05:43,539 - DEBUG - reusing crumb
2024-09-21 13:05:43,539 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:05:43,539 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:05:43,659 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/ORCL?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1175
2024-09-21 13:05:43,662 - DEBUG - response code=200
2024-09-21 13:05:43,663 - DEBUG -    Exiting get()
2024-09-21 13:05:43,664 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:05:43,665 - DEBUG - ('BEGIN', None)
2024-09-21 13:05:43,666 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['ORCL', 'America/New_York'])
2024-09-21 13:05:43,677 - DEBUG -   Entering history()
2024-09-21 13:05:43,678 - DEBUG - ORCL: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:05:43,679 - DEBUG -    Entering get()
2024-09-21 13:05:43,679 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/ORCL
2024-09-21 13:05:43,680 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:05:43,680 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:05:43,680 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:05:43,681 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:05:43,681 - DEBUG - reusing cookie
2024-09-21 13:05:43,681 - DEBUG - reusing crumb
2024-09-21 13:05:43,681 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:05:43,682 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:05:43,840 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/ORCL?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:05:43,840 - DEBUG - response code=200
2024-09-21 13:05:43,840 - DEBUG -    Exiting get()
2024-09-21 13:05:43,842 - DEBUG - ORCL: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:02
2024-09-21 13:05:43,843 - DEBUG - ORCL: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:02-04:00
2024-09-21 13:05:43,849 - DEBUG - ORCL: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:05:43,851 - DEBUG - ORCL: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:05:43,851 - DEBUG -   Exiting history()
2024-09-21 13:05:43,851 - DEBUG -  Exiting history()
2024-09-21 13:05:43,852 - DEBUG - Exiting download()
2024-09-21 13:05:43,853 - DEBUG - Running function: percentage_difference()
2024-09-21 13:05:43,853 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:05:43,853 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:05:43,855 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:05:43,884 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:05:43,885 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:05:44,027 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:05:44,038 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:05:44,654 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:05:44,656 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:05:45,435 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:05:46,124 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:05:46,830 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:05:47,558 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:05:47,861 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:05:47,865 - DEBUG - Running function: maRule()
2024-09-21 13:05:47,865 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:05:47,865 - DEBUG - Entering download()
2024-09-21 13:05:47,866 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:05:47,866 - DEBUG -  Entering history()
2024-09-21 13:05:47,868 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AAPL', 1, 0])
2024-09-21 13:05:47,869 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:05:47,870 - DEBUG -    Entering get()
2024-09-21 13:05:47,870 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AAPL
2024-09-21 13:05:47,870 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:05:47,871 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:05:47,871 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:05:47,871 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:05:47,872 - DEBUG - reusing cookie
2024-09-21 13:05:47,872 - DEBUG - reusing crumb
2024-09-21 13:05:47,872 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:05:47,872 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:05:48,026 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AAPL?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1192
2024-09-21 13:05:48,028 - DEBUG - response code=200
2024-09-21 13:05:48,030 - DEBUG -    Exiting get()
2024-09-21 13:05:48,032 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:05:48,034 - DEBUG - ('BEGIN', None)
2024-09-21 13:05:48,036 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['AAPL', 'America/New_York'])
2024-09-21 13:05:48,047 - DEBUG -   Entering history()
2024-09-21 13:05:48,048 - DEBUG - AAPL: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:05:48,049 - DEBUG -    Entering get()
2024-09-21 13:05:48,050 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AAPL
2024-09-21 13:05:48,050 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:05:48,051 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:05:48,052 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:05:48,053 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:05:48,053 - DEBUG - reusing cookie
2024-09-21 13:05:48,053 - DEBUG - reusing crumb
2024-09-21 13:05:48,053 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:05:48,054 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:05:48,214 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AAPL?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:05:48,214 - DEBUG - response code=200
2024-09-21 13:05:48,214 - DEBUG -    Exiting get()
2024-09-21 13:05:48,216 - DEBUG - AAPL: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:03
2024-09-21 13:05:48,217 - DEBUG - AAPL: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:03-04:00
2024-09-21 13:05:48,222 - DEBUG - AAPL: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:05:48,225 - DEBUG - AAPL: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:05:48,225 - DEBUG -   Exiting history()
2024-09-21 13:05:48,225 - DEBUG -  Exiting history()
2024-09-21 13:05:48,225 - DEBUG - Exiting download()
2024-09-21 13:05:48,226 - DEBUG - Running function: percentage_difference()
2024-09-21 13:05:48,226 - DEBUG - Running function: is_need_sell()
2024-09-21 13:05:48,227 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:05:48,227 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:05:48,228 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:05:48,263 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:05:48,264 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:05:48,416 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:05:48,426 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:05:49,049 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:05:49,053 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:05:49,834 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:05:50,541 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:05:51,251 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:05:51,983 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:05:52,754 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:05:52,759 - DEBUG - Running function: maRule()
2024-09-21 13:05:52,759 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:05:52,760 - DEBUG - Entering download()
2024-09-21 13:05:52,760 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:05:52,762 - DEBUG -  Entering history()
2024-09-21 13:05:52,765 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSFT', 1, 0])
2024-09-21 13:05:52,767 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:05:52,768 - DEBUG -    Entering get()
2024-09-21 13:05:52,769 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSFT
2024-09-21 13:05:52,769 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:05:52,769 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:05:52,770 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:05:52,770 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:05:52,770 - DEBUG - reusing cookie
2024-09-21 13:05:52,770 - DEBUG - reusing crumb
2024-09-21 13:05:52,771 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:05:52,771 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:05:52,909 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSFT?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1211
2024-09-21 13:05:52,911 - DEBUG - response code=200
2024-09-21 13:05:52,912 - DEBUG -    Exiting get()
2024-09-21 13:05:52,912 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:05:52,913 - DEBUG - ('BEGIN', None)
2024-09-21 13:05:52,915 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['MSFT', 'America/New_York'])
2024-09-21 13:05:52,926 - DEBUG -   Entering history()
2024-09-21 13:05:52,926 - DEBUG - MSFT: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:05:52,927 - DEBUG -    Entering get()
2024-09-21 13:05:52,927 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSFT
2024-09-21 13:05:52,927 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:05:52,928 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:05:52,928 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:05:52,928 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:05:52,928 - DEBUG - reusing cookie
2024-09-21 13:05:52,929 - DEBUG - reusing crumb
2024-09-21 13:05:52,929 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:05:52,929 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:05:53,053 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSFT?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:05:53,054 - DEBUG - response code=200
2024-09-21 13:05:53,054 - DEBUG -    Exiting get()
2024-09-21 13:05:53,056 - DEBUG - MSFT: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:01
2024-09-21 13:05:53,058 - DEBUG - MSFT: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:01-04:00
2024-09-21 13:05:53,066 - DEBUG - MSFT: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:05:53,069 - DEBUG - MSFT: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:05:53,069 - DEBUG -   Exiting history()
2024-09-21 13:05:53,069 - DEBUG -  Exiting history()
2024-09-21 13:05:53,069 - DEBUG - Exiting download()
2024-09-21 13:05:53,071 - DEBUG - Running function: percentage_difference()
2024-09-21 13:05:53,071 - DEBUG - Running function: is_need_sell()
2024-09-21 13:05:53,071 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:05:53,071 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:05:53,073 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:05:53,103 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:05:53,104 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:05:53,293 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:05:53,295 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:05:53,870 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:05:53,877 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:05:54,662 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:05:55,355 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:05:55,613 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:05:56,347 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:05:57,110 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:05:57,112 - DEBUG - Running function: maRule()
2024-09-21 13:05:57,112 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:05:57,113 - DEBUG - Entering download()
2024-09-21 13:05:57,113 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:05:57,113 - DEBUG -  Entering history()
2024-09-21 13:05:57,114 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['ADBE', 1, 0])
2024-09-21 13:05:57,115 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:05:57,115 - DEBUG -    Entering get()
2024-09-21 13:05:57,116 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/ADBE
2024-09-21 13:05:57,116 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:05:57,116 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:05:57,116 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:05:57,116 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:05:57,116 - DEBUG - reusing cookie
2024-09-21 13:05:57,116 - DEBUG - reusing crumb
2024-09-21 13:05:57,117 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:05:57,117 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:05:57,238 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/ADBE?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1178
2024-09-21 13:05:57,240 - DEBUG - response code=200
2024-09-21 13:05:57,241 - DEBUG -    Exiting get()
2024-09-21 13:05:57,242 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:05:57,243 - DEBUG - ('BEGIN', None)
2024-09-21 13:05:57,245 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['ADBE', 'America/New_York'])
2024-09-21 13:05:57,256 - DEBUG -   Entering history()
2024-09-21 13:05:57,256 - DEBUG - ADBE: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:05:57,257 - DEBUG -    Entering get()
2024-09-21 13:05:57,257 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/ADBE
2024-09-21 13:05:57,257 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:05:57,258 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:05:57,258 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:05:57,258 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:05:57,259 - DEBUG - reusing cookie
2024-09-21 13:05:57,259 - DEBUG - reusing crumb
2024-09-21 13:05:57,259 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:05:57,259 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:05:57,378 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/ADBE?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:05:57,380 - DEBUG - response code=200
2024-09-21 13:05:57,380 - DEBUG -    Exiting get()
2024-09-21 13:05:57,383 - DEBUG - ADBE: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:01
2024-09-21 13:05:57,384 - DEBUG - ADBE: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:01-04:00
2024-09-21 13:05:57,388 - DEBUG - ADBE: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:05:57,392 - DEBUG - ADBE: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:05:57,392 - DEBUG -   Exiting history()
2024-09-21 13:05:57,392 - DEBUG -  Exiting history()
2024-09-21 13:05:57,392 - DEBUG - Exiting download()
2024-09-21 13:05:57,393 - DEBUG - Running function: percentage_difference()
2024-09-21 13:05:57,394 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:05:57,394 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:05:57,395 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:05:57,428 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:05:57,429 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:05:57,571 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:05:57,576 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:05:58,184 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:05:58,188 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:05:58,975 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:05:59,671 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:00,384 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:06:01,114 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:06:01,873 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:06:02,658 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:06:02,664 - DEBUG - Running function: maRule()
2024-09-21 13:06:02,665 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:06:02,666 - DEBUG - Entering download()
2024-09-21 13:06:02,666 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:06:02,667 - DEBUG -  Entering history()
2024-09-21 13:06:02,668 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['IBM', 1, 0])
2024-09-21 13:06:02,670 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:06:02,670 - DEBUG -    Entering get()
2024-09-21 13:06:02,670 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IBM
2024-09-21 13:06:02,670 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:06:02,671 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:02,671 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:02,671 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:02,671 - DEBUG - reusing cookie
2024-09-21 13:06:02,671 - DEBUG - reusing crumb
2024-09-21 13:06:02,672 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:02,672 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:02,893 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IBM?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1238
2024-09-21 13:06:02,894 - DEBUG - response code=200
2024-09-21 13:06:02,894 - DEBUG -    Exiting get()
2024-09-21 13:06:02,894 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:06:02,894 - DEBUG - ('BEGIN', None)
2024-09-21 13:06:02,895 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['IBM', 'America/New_York'])
2024-09-21 13:06:02,903 - DEBUG -   Entering history()
2024-09-21 13:06:02,903 - DEBUG - IBM: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:02,904 - DEBUG -    Entering get()
2024-09-21 13:06:02,904 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/IBM
2024-09-21 13:06:02,904 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:02,904 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:02,904 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:02,904 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:02,905 - DEBUG - reusing cookie
2024-09-21 13:06:02,905 - DEBUG - reusing crumb
2024-09-21 13:06:02,905 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:02,905 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:03,078 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/IBM?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:06:03,081 - DEBUG - response code=200
2024-09-21 13:06:03,082 - DEBUG -    Exiting get()
2024-09-21 13:06:03,095 - DEBUG - IBM: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:02
2024-09-21 13:06:03,098 - DEBUG - IBM: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:02-04:00
2024-09-21 13:06:03,113 - DEBUG - IBM: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:03,118 - DEBUG - IBM: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:03,119 - DEBUG -   Exiting history()
2024-09-21 13:06:03,119 - DEBUG -  Exiting history()
2024-09-21 13:06:03,119 - DEBUG - Exiting download()
2024-09-21 13:06:03,121 - DEBUG - Running function: percentage_difference()
2024-09-21 13:06:03,122 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:06:03,122 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:06:03,124 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:06:03,165 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:06:03,166 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:06:03,320 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:06:03,329 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:06:03,958 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:06:03,965 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:06:04,755 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:05,439 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:06,149 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:06:06,885 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:06:07,189 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:06:07,190 - DEBUG - Running function: maRule()
2024-09-21 13:06:07,190 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:06:07,190 - DEBUG - Entering download()
2024-09-21 13:06:07,190 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:06:07,191 - DEBUG -  Entering history()
2024-09-21 13:06:07,191 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['TSM', 1, 0])
2024-09-21 13:06:07,191 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:06:07,191 - DEBUG -    Entering get()
2024-09-21 13:06:07,191 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSM
2024-09-21 13:06:07,191 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:06:07,192 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:07,192 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:07,192 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:07,192 - DEBUG - reusing cookie
2024-09-21 13:06:07,192 - DEBUG - reusing crumb
2024-09-21 13:06:07,192 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:07,192 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:07,325 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSM?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1246
2024-09-21 13:06:07,326 - DEBUG - response code=200
2024-09-21 13:06:07,326 - DEBUG -    Exiting get()
2024-09-21 13:06:07,326 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:06:07,326 - DEBUG - ('BEGIN', None)
2024-09-21 13:06:07,327 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['TSM', 'America/New_York'])
2024-09-21 13:06:07,330 - DEBUG -   Entering history()
2024-09-21 13:06:07,330 - DEBUG - TSM: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:07,330 - DEBUG -    Entering get()
2024-09-21 13:06:07,330 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/TSM
2024-09-21 13:06:07,331 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:07,331 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:07,331 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:07,331 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:07,331 - DEBUG - reusing cookie
2024-09-21 13:06:07,331 - DEBUG - reusing crumb
2024-09-21 13:06:07,332 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:07,332 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:07,468 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/TSM?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:06:07,478 - DEBUG - response code=200
2024-09-21 13:06:07,479 - DEBUG -    Exiting get()
2024-09-21 13:06:07,488 - DEBUG - TSM: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:02
2024-09-21 13:06:07,492 - DEBUG - TSM: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:02-04:00
2024-09-21 13:06:07,506 - DEBUG - TSM: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:07,511 - DEBUG - TSM: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:07,511 - DEBUG -   Exiting history()
2024-09-21 13:06:07,511 - DEBUG -  Exiting history()
2024-09-21 13:06:07,512 - DEBUG - Exiting download()
2024-09-21 13:06:07,514 - DEBUG - Running function: percentage_difference()
2024-09-21 13:06:07,514 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:06:07,514 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:06:07,517 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:06:07,553 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:06:07,554 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:06:07,724 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:06:07,728 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:06:08,260 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:06:08,267 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:06:09,055 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:09,742 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:10,469 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:06:11,220 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:06:11,983 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:06:11,988 - DEBUG - Running function: maRule()
2024-09-21 13:06:11,988 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:06:11,989 - DEBUG - Entering download()
2024-09-21 13:06:11,990 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:06:11,991 - DEBUG -  Entering history()
2024-09-21 13:06:11,993 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['META', 1, 0])
2024-09-21 13:06:11,995 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:06:11,996 - DEBUG -    Entering get()
2024-09-21 13:06:11,997 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/META
2024-09-21 13:06:11,998 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:06:11,998 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:11,999 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:11,999 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:11,999 - DEBUG - reusing cookie
2024-09-21 13:06:12,000 - DEBUG - reusing crumb
2024-09-21 13:06:12,000 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:12,000 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:12,106 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/META?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1191
2024-09-21 13:06:12,108 - DEBUG - response code=200
2024-09-21 13:06:12,109 - DEBUG -    Exiting get()
2024-09-21 13:06:12,110 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:06:12,110 - DEBUG - ('BEGIN', None)
2024-09-21 13:06:12,112 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['META', 'America/New_York'])
2024-09-21 13:06:12,123 - DEBUG -   Entering history()
2024-09-21 13:06:12,124 - DEBUG - META: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:12,125 - DEBUG -    Entering get()
2024-09-21 13:06:12,125 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/META
2024-09-21 13:06:12,126 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:12,126 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:12,127 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:12,127 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:12,128 - DEBUG - reusing cookie
2024-09-21 13:06:12,128 - DEBUG - reusing crumb
2024-09-21 13:06:12,128 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:12,129 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:12,242 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/META?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:06:12,243 - DEBUG - response code=200
2024-09-21 13:06:12,243 - DEBUG -    Exiting get()
2024-09-21 13:06:12,245 - DEBUG - META: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:02
2024-09-21 13:06:12,246 - DEBUG - META: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:02-04:00
2024-09-21 13:06:12,254 - DEBUG - META: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:12,258 - DEBUG - META: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:12,259 - DEBUG -   Exiting history()
2024-09-21 13:06:12,259 - DEBUG -  Exiting history()
2024-09-21 13:06:12,259 - DEBUG - Exiting download()
2024-09-21 13:06:12,261 - DEBUG - Running function: percentage_difference()
2024-09-21 13:06:12,261 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:06:12,262 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:06:12,263 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:06:12,297 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:06:12,298 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:06:12,442 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:06:12,452 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:06:13,018 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:06:13,025 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:06:13,869 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:14,099 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:14,839 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:06:15,586 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:06:16,350 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:06:16,356 - DEBUG - Running function: maRule()
2024-09-21 13:06:16,357 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:06:16,357 - DEBUG - Entering download()
2024-09-21 13:06:16,358 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:06:16,359 - DEBUG -  Entering history()
2024-09-21 13:06:16,360 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['LULU', 1, 0])
2024-09-21 13:06:16,363 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:06:16,364 - DEBUG -    Entering get()
2024-09-21 13:06:16,364 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/LULU
2024-09-21 13:06:16,365 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:06:16,365 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:16,365 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:16,366 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:16,366 - DEBUG - reusing cookie
2024-09-21 13:06:16,366 - DEBUG - reusing crumb
2024-09-21 13:06:16,366 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:16,367 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:16,471 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/LULU?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1215
2024-09-21 13:06:16,473 - DEBUG - response code=200
2024-09-21 13:06:16,473 - DEBUG -    Exiting get()
2024-09-21 13:06:16,474 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:06:16,475 - DEBUG - ('BEGIN', None)
2024-09-21 13:06:16,477 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['LULU', 'America/New_York'])
2024-09-21 13:06:16,487 - DEBUG -   Entering history()
2024-09-21 13:06:16,488 - DEBUG - LULU: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:16,489 - DEBUG -    Entering get()
2024-09-21 13:06:16,490 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/LULU
2024-09-21 13:06:16,490 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:16,491 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:16,491 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:16,492 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:16,493 - DEBUG - reusing cookie
2024-09-21 13:06:16,493 - DEBUG - reusing crumb
2024-09-21 13:06:16,493 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:16,493 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:16,601 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/LULU?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:06:16,602 - DEBUG - response code=200
2024-09-21 13:06:16,602 - DEBUG -    Exiting get()
2024-09-21 13:06:16,605 - DEBUG - LULU: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:01
2024-09-21 13:06:16,607 - DEBUG - LULU: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:01-04:00
2024-09-21 13:06:16,611 - DEBUG - LULU: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:16,615 - DEBUG - LULU: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:16,615 - DEBUG -   Exiting history()
2024-09-21 13:06:16,615 - DEBUG -  Exiting history()
2024-09-21 13:06:16,616 - DEBUG - Exiting download()
2024-09-21 13:06:16,618 - DEBUG - Running function: percentage_difference()
2024-09-21 13:06:16,618 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:06:16,618 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:06:16,620 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:06:16,655 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:06:16,656 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:06:16,810 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:06:16,821 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:06:17,350 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:06:17,355 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:06:17,679 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:18,372 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:19,075 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:06:19,807 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:06:20,581 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:06:20,587 - DEBUG - Running function: maRule()
2024-09-21 13:06:20,588 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:06:20,589 - DEBUG - Entering download()
2024-09-21 13:06:20,589 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:06:20,590 - DEBUG -  Entering history()
2024-09-21 13:06:20,592 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AAPL', 1, 0])
2024-09-21 13:06:20,594 - DEBUG -   Entering history()
2024-09-21 13:06:20,594 - DEBUG - AAPL: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:20,595 - DEBUG -    Entering get()
2024-09-21 13:06:20,596 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AAPL
2024-09-21 13:06:20,597 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:20,597 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:20,598 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:20,599 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:20,599 - DEBUG - reusing cookie
2024-09-21 13:06:20,599 - DEBUG - reusing crumb
2024-09-21 13:06:20,600 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:20,600 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:20,757 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AAPL?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:06:20,761 - DEBUG - response code=200
2024-09-21 13:06:20,761 - DEBUG -    Exiting get()
2024-09-21 13:06:20,767 - DEBUG - AAPL: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:03
2024-09-21 13:06:20,770 - DEBUG - AAPL: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:03-04:00
2024-09-21 13:06:20,779 - DEBUG - AAPL: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:20,783 - DEBUG - AAPL: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:20,783 - DEBUG -   Exiting history()
2024-09-21 13:06:20,783 - DEBUG -  Exiting history()
2024-09-21 13:06:20,783 - DEBUG - Exiting download()
2024-09-21 13:06:20,785 - DEBUG - Running function: percentage_difference()
2024-09-21 13:06:20,785 - DEBUG - Running function: is_need_sell()
2024-09-21 13:06:20,785 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:06:20,785 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:06:20,787 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:06:20,821 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:06:20,822 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:06:20,971 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:06:20,973 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:06:21,556 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:06:21,564 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:06:22,333 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:23,035 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:23,769 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:06:24,494 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:06:25,255 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:06:25,258 - DEBUG - Running function: maRule()
2024-09-21 13:06:25,258 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:06:25,259 - DEBUG - Entering download()
2024-09-21 13:06:25,259 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:06:25,259 - DEBUG -  Entering history()
2024-09-21 13:06:25,260 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AVGO', 1, 0])
2024-09-21 13:06:25,260 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:06:25,260 - DEBUG -    Entering get()
2024-09-21 13:06:25,260 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AVGO
2024-09-21 13:06:25,261 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:06:25,261 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:25,261 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:25,261 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:25,261 - DEBUG - reusing cookie
2024-09-21 13:06:25,261 - DEBUG - reusing crumb
2024-09-21 13:06:25,261 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:25,262 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:25,388 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AVGO?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1200
2024-09-21 13:06:25,388 - DEBUG - response code=200
2024-09-21 13:06:25,388 - DEBUG -    Exiting get()
2024-09-21 13:06:25,389 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:06:25,389 - DEBUG - ('BEGIN', None)
2024-09-21 13:06:25,389 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['AVGO', 'America/New_York'])
2024-09-21 13:06:25,399 - DEBUG -   Entering history()
2024-09-21 13:06:25,399 - DEBUG - AVGO: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:25,400 - DEBUG -    Entering get()
2024-09-21 13:06:25,400 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AVGO
2024-09-21 13:06:25,400 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:25,401 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:25,401 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:25,401 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:25,401 - DEBUG - reusing cookie
2024-09-21 13:06:25,401 - DEBUG - reusing crumb
2024-09-21 13:06:25,402 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:25,402 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:25,533 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AVGO?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:06:25,534 - DEBUG - response code=200
2024-09-21 13:06:25,534 - DEBUG -    Exiting get()
2024-09-21 13:06:25,536 - DEBUG - AVGO: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:02
2024-09-21 13:06:25,538 - DEBUG - AVGO: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:02-04:00
2024-09-21 13:06:25,545 - DEBUG - Adding out-of-range Dividends @ 2023-09-20 in new prices row of NaNs
2024-09-21 13:06:25,557 - DEBUG - AVGO: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:25,559 - DEBUG - AVGO: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:25,560 - DEBUG -   Exiting history()
2024-09-21 13:06:25,560 - DEBUG -  Exiting history()
2024-09-21 13:06:25,560 - DEBUG - Exiting download()
2024-09-21 13:06:25,561 - DEBUG - Running function: percentage_difference()
2024-09-21 13:06:25,561 - DEBUG - Running function: is_need_sell()
2024-09-21 13:06:25,561 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:06:25,561 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:06:25,563 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:06:25,595 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:06:25,596 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:06:25,775 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:06:25,778 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:06:26,290 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:06:26,297 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:06:27,133 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:27,830 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:28,527 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:06:29,262 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:06:30,034 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:06:30,036 - DEBUG - Running function: maRule()
2024-09-21 13:06:30,037 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:06:30,037 - DEBUG - Entering download()
2024-09-21 13:06:30,037 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:06:30,037 - DEBUG -  Entering history()
2024-09-21 13:06:30,038 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['ARKW', 1, 0])
2024-09-21 13:06:30,039 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:06:30,039 - DEBUG -    Entering get()
2024-09-21 13:06:30,039 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/ARKW
2024-09-21 13:06:30,040 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:06:30,040 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:30,040 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:30,040 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:30,040 - DEBUG - reusing cookie
2024-09-21 13:06:30,041 - DEBUG - reusing crumb
2024-09-21 13:06:30,041 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:30,041 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:30,154 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/ARKW?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1218
2024-09-21 13:06:30,156 - DEBUG - response code=200
2024-09-21 13:06:30,157 - DEBUG -    Exiting get()
2024-09-21 13:06:30,158 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:06:30,159 - DEBUG - ('BEGIN', None)
2024-09-21 13:06:30,160 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['ARKW', 'America/New_York'])
2024-09-21 13:06:30,170 - DEBUG -   Entering history()
2024-09-21 13:06:30,171 - DEBUG - ARKW: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:30,172 - DEBUG -    Entering get()
2024-09-21 13:06:30,172 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/ARKW
2024-09-21 13:06:30,173 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:30,173 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:30,174 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:30,175 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:30,175 - DEBUG - reusing cookie
2024-09-21 13:06:30,175 - DEBUG - reusing crumb
2024-09-21 13:06:30,175 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:30,176 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:30,297 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/ARKW?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:06:30,299 - DEBUG - response code=200
2024-09-21 13:06:30,301 - DEBUG -    Exiting get()
2024-09-21 13:06:30,312 - DEBUG - ARKW: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:00
2024-09-21 13:06:30,313 - DEBUG - ARKW: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:00-04:00
2024-09-21 13:06:30,317 - DEBUG - ARKW: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:30,321 - DEBUG - ARKW: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:30,322 - DEBUG -   Exiting history()
2024-09-21 13:06:30,322 - DEBUG -  Exiting history()
2024-09-21 13:06:30,322 - DEBUG - Exiting download()
2024-09-21 13:06:30,324 - DEBUG - Running function: percentage_difference()
2024-09-21 13:06:30,325 - DEBUG - Running function: is_need_sell()
2024-09-21 13:06:30,325 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:06:30,325 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:06:30,327 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:06:30,366 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:06:30,367 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:06:30,507 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:06:30,518 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:06:31,108 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:06:31,115 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:06:31,902 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:32,601 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:33,312 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:06:33,596 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:06:34,353 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:06:34,358 - DEBUG - Running function: maRule()
2024-09-21 13:06:34,359 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:06:34,359 - DEBUG - Entering download()
2024-09-21 13:06:34,360 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:06:34,361 - DEBUG -  Entering history()
2024-09-21 13:06:34,362 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSFT', 1, 0])
2024-09-21 13:06:34,363 - DEBUG -   Entering history()
2024-09-21 13:06:34,363 - DEBUG - MSFT: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:34,363 - DEBUG -    Entering get()
2024-09-21 13:06:34,364 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSFT
2024-09-21 13:06:34,364 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:34,364 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:34,365 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:34,365 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:34,366 - DEBUG - reusing cookie
2024-09-21 13:06:34,366 - DEBUG - reusing crumb
2024-09-21 13:06:34,366 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:34,366 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:34,507 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSFT?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:06:34,510 - DEBUG - response code=200
2024-09-21 13:06:34,511 - DEBUG -    Exiting get()
2024-09-21 13:06:34,521 - DEBUG - MSFT: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:01
2024-09-21 13:06:34,524 - DEBUG - MSFT: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:01-04:00
2024-09-21 13:06:34,535 - DEBUG - MSFT: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:34,539 - DEBUG - MSFT: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:34,540 - DEBUG -   Exiting history()
2024-09-21 13:06:34,540 - DEBUG -  Exiting history()
2024-09-21 13:06:34,540 - DEBUG - Exiting download()
2024-09-21 13:06:34,542 - DEBUG - Running function: percentage_difference()
2024-09-21 13:06:34,542 - DEBUG - Running function: is_need_sell()
2024-09-21 13:06:34,542 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:06:34,542 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:06:34,544 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:06:34,577 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:06:34,578 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:06:34,732 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:06:34,735 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:06:35,249 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:06:35,256 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:06:36,056 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:36,749 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:37,446 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:06:38,187 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:06:38,953 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:06:38,959 - DEBUG - Running function: maRule()
2024-09-21 13:06:38,960 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:06:38,960 - DEBUG - Entering download()
2024-09-21 13:06:38,961 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:06:38,962 - DEBUG -  Entering history()
2024-09-21 13:06:38,963 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AMZN', 1, 0])
2024-09-21 13:06:38,965 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:06:38,966 - DEBUG -    Entering get()
2024-09-21 13:06:38,967 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMZN
2024-09-21 13:06:38,967 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:06:38,968 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:38,968 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:38,969 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:38,969 - DEBUG - reusing cookie
2024-09-21 13:06:38,970 - DEBUG - reusing crumb
2024-09-21 13:06:38,970 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:38,970 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:39,075 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMZN?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1205
2024-09-21 13:06:39,077 - DEBUG - response code=200
2024-09-21 13:06:39,077 - DEBUG -    Exiting get()
2024-09-21 13:06:39,078 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:06:39,079 - DEBUG - ('BEGIN', None)
2024-09-21 13:06:39,081 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['AMZN', 'America/New_York'])
2024-09-21 13:06:39,093 - DEBUG -   Entering history()
2024-09-21 13:06:39,094 - DEBUG - AMZN: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:39,094 - DEBUG -    Entering get()
2024-09-21 13:06:39,095 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMZN
2024-09-21 13:06:39,097 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:39,098 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:39,099 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:39,099 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:39,100 - DEBUG - reusing cookie
2024-09-21 13:06:39,101 - DEBUG - reusing crumb
2024-09-21 13:06:39,101 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:39,102 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:39,212 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMZN?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:06:39,213 - DEBUG - response code=200
2024-09-21 13:06:39,213 - DEBUG -    Exiting get()
2024-09-21 13:06:39,215 - DEBUG - AMZN: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:03
2024-09-21 13:06:39,217 - DEBUG - AMZN: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:03-04:00
2024-09-21 13:06:39,219 - DEBUG - AMZN: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:39,223 - DEBUG - AMZN: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:39,224 - DEBUG -   Exiting history()
2024-09-21 13:06:39,224 - DEBUG -  Exiting history()
2024-09-21 13:06:39,224 - DEBUG - Exiting download()
2024-09-21 13:06:39,226 - DEBUG - Running function: percentage_difference()
2024-09-21 13:06:39,226 - DEBUG - Running function: is_need_sell()
2024-09-21 13:06:39,226 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:06:39,226 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:06:39,228 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:06:39,263 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:06:39,263 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:06:39,412 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:06:39,421 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:06:39,981 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:06:39,988 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:06:40,764 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:41,445 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:42,174 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:06:42,915 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:06:43,671 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:06:43,676 - DEBUG - Running function: maRule()
2024-09-21 13:06:43,677 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:06:43,678 - DEBUG - Entering download()
2024-09-21 13:06:43,678 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:06:43,679 - DEBUG -  Entering history()
2024-09-21 13:06:43,681 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['LULU', 1, 0])
2024-09-21 13:06:43,683 - DEBUG -   Entering history()
2024-09-21 13:06:43,684 - DEBUG - LULU: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:43,685 - DEBUG -    Entering get()
2024-09-21 13:06:43,685 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/LULU
2024-09-21 13:06:43,686 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:43,686 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:43,686 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:43,686 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:43,687 - DEBUG - reusing cookie
2024-09-21 13:06:43,687 - DEBUG - reusing crumb
2024-09-21 13:06:43,687 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:43,688 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:43,799 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/LULU?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:06:43,802 - DEBUG - response code=200
2024-09-21 13:06:43,803 - DEBUG -    Exiting get()
2024-09-21 13:06:43,812 - DEBUG - LULU: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:01
2024-09-21 13:06:43,816 - DEBUG - LULU: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:01-04:00
2024-09-21 13:06:43,822 - DEBUG - LULU: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:43,826 - DEBUG - LULU: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:43,827 - DEBUG -   Exiting history()
2024-09-21 13:06:43,827 - DEBUG -  Exiting history()
2024-09-21 13:06:43,828 - DEBUG - Exiting download()
2024-09-21 13:06:43,830 - DEBUG - Running function: percentage_difference()
2024-09-21 13:06:43,830 - DEBUG - Running function: is_need_sell()
2024-09-21 13:06:43,830 - DEBUG - Running function: notifyCenter()
2024-09-21 13:06:43,830 - DEBUG - Running function: sendtelegrammsg()
2024-09-21 13:06:43,831 - DEBUG - Starting new HTTPS connection (1): api.telegram.org:443
2024-09-21 13:06:44,107 - DEBUG - https://api.telegram.org:443 "GET /bot6867104517:AAHaY84LQ4tZKVUvXP133NP6KJNxIGQe6qw/sendMessage?chat_id=420134022&text=LULU%2C+action+sell%2C+rang+150%2Csma+329.6%2Cclose+262.61%2C+percentage+difference+-25.51%25%2C+account+U2049237%2C+You+have+to+sell HTTP/11" 200 386
2024-09-21 13:06:44,108 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:06:44,108 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:06:44,111 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:06:44,153 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:06:44,153 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:06:44,302 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:06:44,312 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:06:44,828 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:06:44,835 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:06:45,612 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:46,301 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:47,035 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:06:47,776 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:06:48,080 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:06:48,902 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:06:48,908 - DEBUG - Running function: maRule()
2024-09-21 13:06:48,908 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:06:48,909 - DEBUG - Entering download()
2024-09-21 13:06:48,910 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:06:48,911 - DEBUG -  Entering history()
2024-09-21 13:06:48,913 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AFRM', 1, 0])
2024-09-21 13:06:48,915 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:06:48,916 - DEBUG -    Entering get()
2024-09-21 13:06:48,917 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AFRM
2024-09-21 13:06:48,917 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:06:48,918 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:48,918 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:48,918 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:48,918 - DEBUG - reusing cookie
2024-09-21 13:06:48,919 - DEBUG - reusing crumb
2024-09-21 13:06:48,919 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:48,919 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:49,021 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AFRM?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1172
2024-09-21 13:06:49,023 - DEBUG - response code=200
2024-09-21 13:06:49,024 - DEBUG -    Exiting get()
2024-09-21 13:06:49,024 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:06:49,025 - DEBUG - ('BEGIN', None)
2024-09-21 13:06:49,026 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['AFRM', 'America/New_York'])
2024-09-21 13:06:49,029 - DEBUG -   Entering history()
2024-09-21 13:06:49,029 - DEBUG - AFRM: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:49,030 - DEBUG -    Entering get()
2024-09-21 13:06:49,030 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AFRM
2024-09-21 13:06:49,031 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:49,031 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:49,031 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:49,031 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:49,032 - DEBUG - reusing cookie
2024-09-21 13:06:49,032 - DEBUG - reusing crumb
2024-09-21 13:06:49,032 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:49,032 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:49,156 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AFRM?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:06:49,156 - DEBUG - response code=200
2024-09-21 13:06:49,157 - DEBUG -    Exiting get()
2024-09-21 13:06:49,159 - DEBUG - AFRM: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:01
2024-09-21 13:06:49,160 - DEBUG - AFRM: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:01-04:00
2024-09-21 13:06:49,163 - DEBUG - AFRM: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:49,167 - DEBUG - AFRM: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:49,167 - DEBUG -   Exiting history()
2024-09-21 13:06:49,167 - DEBUG -  Exiting history()
2024-09-21 13:06:49,168 - DEBUG - Exiting download()
2024-09-21 13:06:49,169 - DEBUG - Running function: percentage_difference()
2024-09-21 13:06:49,170 - DEBUG - Running function: is_need_buy()
2024-09-21 13:06:49,170 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:06:49,170 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:06:49,172 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:06:49,208 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:06:49,209 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:06:49,376 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:06:49,384 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:06:49,985 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:06:49,992 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:06:50,774 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:51,486 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:51,729 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:06:52,478 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:06:53,295 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:06:53,300 - DEBUG - Running function: maRule()
2024-09-21 13:06:53,300 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:06:53,301 - DEBUG - Entering download()
2024-09-21 13:06:53,302 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:06:53,303 - DEBUG -  Entering history()
2024-09-21 13:06:53,305 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['AMD', 1, 0])
2024-09-21 13:06:53,307 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:06:53,308 - DEBUG -    Entering get()
2024-09-21 13:06:53,309 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMD
2024-09-21 13:06:53,309 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:06:53,310 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:53,310 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:53,311 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:53,311 - DEBUG - reusing cookie
2024-09-21 13:06:53,312 - DEBUG - reusing crumb
2024-09-21 13:06:53,313 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:53,313 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:53,425 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMD?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1226
2024-09-21 13:06:53,427 - DEBUG - response code=200
2024-09-21 13:06:53,428 - DEBUG -    Exiting get()
2024-09-21 13:06:53,428 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:06:53,429 - DEBUG - ('BEGIN', None)
2024-09-21 13:06:53,431 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['AMD', 'America/New_York'])
2024-09-21 13:06:53,442 - DEBUG -   Entering history()
2024-09-21 13:06:53,442 - DEBUG - AMD: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:53,443 - DEBUG -    Entering get()
2024-09-21 13:06:53,443 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/AMD
2024-09-21 13:06:53,443 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:53,443 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:53,444 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:53,444 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:53,444 - DEBUG - reusing cookie
2024-09-21 13:06:53,444 - DEBUG - reusing crumb
2024-09-21 13:06:53,444 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:53,444 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:53,558 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/AMD?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:06:53,558 - DEBUG - response code=200
2024-09-21 13:06:53,559 - DEBUG -    Exiting get()
2024-09-21 13:06:53,561 - DEBUG - AMD: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:01
2024-09-21 13:06:53,563 - DEBUG - AMD: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:01-04:00
2024-09-21 13:06:53,567 - DEBUG - AMD: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:53,571 - DEBUG - AMD: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:53,571 - DEBUG -   Exiting history()
2024-09-21 13:06:53,571 - DEBUG -  Exiting history()
2024-09-21 13:06:53,571 - DEBUG - Exiting download()
2024-09-21 13:06:53,573 - DEBUG - Running function: percentage_difference()
2024-09-21 13:06:53,573 - DEBUG - Running function: is_need_buy()
2024-09-21 13:06:53,573 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:06:53,573 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:06:53,575 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:06:53,610 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:06:53,611 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:06:53,752 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:06:53,762 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:06:54,347 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:06:54,354 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:06:55,221 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:55,910 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:06:56,615 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:06:57,342 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:06:58,103 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:06:58,107 - DEBUG - Running function: maRule()
2024-09-21 13:06:58,108 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:06:58,109 - DEBUG - Entering download()
2024-09-21 13:06:58,109 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:06:58,110 - DEBUG -  Entering history()
2024-09-21 13:06:58,113 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['CRM', 1, 0])
2024-09-21 13:06:58,115 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:06:58,116 - DEBUG -    Entering get()
2024-09-21 13:06:58,117 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CRM
2024-09-21 13:06:58,117 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:06:58,118 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:58,118 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:58,119 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:58,119 - DEBUG - reusing cookie
2024-09-21 13:06:58,120 - DEBUG - reusing crumb
2024-09-21 13:06:58,120 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:58,121 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:58,226 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CRM?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1197
2024-09-21 13:06:58,228 - DEBUG - response code=200
2024-09-21 13:06:58,229 - DEBUG -    Exiting get()
2024-09-21 13:06:58,229 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:06:58,230 - DEBUG - ('BEGIN', None)
2024-09-21 13:06:58,232 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['CRM', 'America/New_York'])
2024-09-21 13:06:58,246 - DEBUG -   Entering history()
2024-09-21 13:06:58,247 - DEBUG - CRM: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:58,248 - DEBUG -    Entering get()
2024-09-21 13:06:58,248 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/CRM
2024-09-21 13:06:58,249 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:06:58,249 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:06:58,250 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:06:58,250 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:06:58,251 - DEBUG - reusing cookie
2024-09-21 13:06:58,251 - DEBUG - reusing crumb
2024-09-21 13:06:58,252 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:06:58,254 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:06:58,364 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/CRM?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:06:58,365 - DEBUG - response code=200
2024-09-21 13:06:58,365 - DEBUG -    Exiting get()
2024-09-21 13:06:58,368 - DEBUG - CRM: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:02
2024-09-21 13:06:58,369 - DEBUG - CRM: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:02-04:00
2024-09-21 13:06:58,376 - DEBUG - CRM: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:58,380 - DEBUG - CRM: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:06:58,380 - DEBUG -   Exiting history()
2024-09-21 13:06:58,380 - DEBUG -  Exiting history()
2024-09-21 13:06:58,380 - DEBUG - Exiting download()
2024-09-21 13:06:58,382 - DEBUG - Running function: percentage_difference()
2024-09-21 13:06:58,382 - DEBUG - Running function: is_need_buy()
2024-09-21 13:06:58,382 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:06:58,383 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:06:58,384 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:06:58,419 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:06:58,421 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:06:58,558 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:06:58,561 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:06:59,087 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:06:59,089 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:06:59,840 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:07:00,540 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:07:01,253 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:07:01,982 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:07:02,760 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:07:02,762 - DEBUG - Running function: maRule()
2024-09-21 13:07:02,763 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:07:02,763 - DEBUG - Entering download()
2024-09-21 13:07:02,763 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:07:02,763 - DEBUG -  Entering history()
2024-09-21 13:07:02,764 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['GOOG', 1, 0])
2024-09-21 13:07:02,764 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:07:02,764 - DEBUG -    Entering get()
2024-09-21 13:07:02,765 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/GOOG
2024-09-21 13:07:02,765 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:07:02,765 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:07:02,765 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:07:02,765 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:07:02,765 - DEBUG - reusing cookie
2024-09-21 13:07:02,765 - DEBUG - reusing crumb
2024-09-21 13:07:02,765 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:07:02,765 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:07:02,886 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/GOOG?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1191
2024-09-21 13:07:02,886 - DEBUG - response code=200
2024-09-21 13:07:02,887 - DEBUG -    Exiting get()
2024-09-21 13:07:02,887 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:07:02,887 - DEBUG - ('BEGIN', None)
2024-09-21 13:07:02,887 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['GOOG', 'America/New_York'])
2024-09-21 13:07:02,897 - DEBUG -   Entering history()
2024-09-21 13:07:02,897 - DEBUG - GOOG: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:07:02,897 - DEBUG -    Entering get()
2024-09-21 13:07:02,897 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/GOOG
2024-09-21 13:07:02,897 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:07:02,898 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:07:02,898 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:07:02,898 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:07:02,898 - DEBUG - reusing cookie
2024-09-21 13:07:02,898 - DEBUG - reusing crumb
2024-09-21 13:07:02,898 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:07:02,898 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:07:03,000 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/GOOG?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:07:03,002 - DEBUG - response code=200
2024-09-21 13:07:03,002 - DEBUG -    Exiting get()
2024-09-21 13:07:03,005 - DEBUG - GOOG: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:03
2024-09-21 13:07:03,006 - DEBUG - GOOG: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:03-04:00
2024-09-21 13:07:03,013 - DEBUG - GOOG: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:07:03,017 - DEBUG - GOOG: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:07:03,017 - DEBUG -   Exiting history()
2024-09-21 13:07:03,018 - DEBUG -  Exiting history()
2024-09-21 13:07:03,018 - DEBUG - Exiting download()
2024-09-21 13:07:03,019 - DEBUG - Running function: percentage_difference()
2024-09-21 13:07:03,020 - DEBUG - Running function: is_need_buy()
2024-09-21 13:07:03,020 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:07:03,020 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:07:03,022 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:07:03,058 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:07:03,058 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:07:03,223 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:07:03,226 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:07:03,840 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:07:03,848 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:07:04,632 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:07:05,345 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:07:06,068 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:07:06,800 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:07:07,100 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:07:07,105 - DEBUG - Running function: maRule()
2024-09-21 13:07:07,106 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:07:07,107 - DEBUG - Entering download()
2024-09-21 13:07:07,107 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:07:07,108 - DEBUG -  Entering history()
2024-09-21 13:07:07,111 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['MSI', 1, 0])
2024-09-21 13:07:07,113 - DEBUG -   Entering history()
2024-09-21 13:07:07,114 - DEBUG - MSI: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:07:07,116 - DEBUG -    Entering get()
2024-09-21 13:07:07,117 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/MSI
2024-09-21 13:07:07,118 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:07:07,119 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:07:07,120 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:07:07,121 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:07:07,121 - DEBUG - reusing cookie
2024-09-21 13:07:07,122 - DEBUG - reusing crumb
2024-09-21 13:07:07,122 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:07:07,123 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:07:07,357 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/MSI?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:07:07,358 - DEBUG - response code=200
2024-09-21 13:07:07,359 - DEBUG -    Exiting get()
2024-09-21 13:07:07,362 - DEBUG - MSI: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:02
2024-09-21 13:07:07,369 - DEBUG - MSI: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:02-04:00
2024-09-21 13:07:07,375 - DEBUG - MSI: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:07:07,378 - DEBUG - MSI: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:07:07,378 - DEBUG -   Exiting history()
2024-09-21 13:07:07,379 - DEBUG -  Exiting history()
2024-09-21 13:07:07,379 - DEBUG - Exiting download()
2024-09-21 13:07:07,381 - DEBUG - Running function: percentage_difference()
2024-09-21 13:07:07,382 - DEBUG - Running function: is_need_buy()
2024-09-21 13:07:07,382 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:07:07,382 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:07:07,384 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:07:07,418 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:07:07,418 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:07:07,576 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:07:07,586 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:07:08,212 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:07:08,220 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:07:08,992 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:07:09,221 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:07:09,465 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:07:10,197 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:07:10,505 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:07:10,508 - DEBUG - Running function: maRule()
2024-09-21 13:07:10,508 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:07:10,508 - DEBUG - Entering download()
2024-09-21 13:07:10,508 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:07:10,508 - DEBUG -  Entering history()
2024-09-21 13:07:10,509 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['NVDA', 1, 0])
2024-09-21 13:07:10,509 - DEBUG -   Entering history()
2024-09-21 13:07:10,510 - DEBUG - NVDA: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:07:10,510 - DEBUG -    Entering get()
2024-09-21 13:07:10,510 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/NVDA
2024-09-21 13:07:10,510 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:07:10,510 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:07:10,510 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:07:10,510 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:07:10,510 - DEBUG - reusing cookie
2024-09-21 13:07:10,511 - DEBUG - reusing crumb
2024-09-21 13:07:10,511 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:07:10,511 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:07:10,631 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/NVDA?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:07:10,635 - DEBUG - response code=200
2024-09-21 13:07:10,635 - DEBUG -    Exiting get()
2024-09-21 13:07:10,644 - DEBUG - NVDA: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:01
2024-09-21 13:07:10,647 - DEBUG - NVDA: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:01-04:00
2024-09-21 13:07:10,663 - DEBUG - NVDA: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:07:10,667 - DEBUG - NVDA: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:07:10,667 - DEBUG -   Exiting history()
2024-09-21 13:07:10,667 - DEBUG -  Exiting history()
2024-09-21 13:07:10,667 - DEBUG - Exiting download()
2024-09-21 13:07:10,668 - DEBUG - Running function: percentage_difference()
2024-09-21 13:07:10,669 - DEBUG - Running function: is_need_buy()
2024-09-21 13:07:10,669 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:07:10,669 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:07:10,670 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:07:10,701 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:07:10,702 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:07:10,847 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:07:10,848 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:07:11,362 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:07:11,369 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:07:12,155 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:07:12,412 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:07:13,107 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:07:13,842 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:07:14,168 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:07:14,173 - DEBUG - Running function: maRule()
2024-09-21 13:07:14,179 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:07:14,180 - DEBUG - Entering download()
2024-09-21 13:07:14,180 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:07:14,181 - DEBUG -  Entering history()
2024-09-21 13:07:14,183 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['ORCL', 1, 0])
2024-09-21 13:07:14,184 - DEBUG -   Entering history()
2024-09-21 13:07:14,186 - DEBUG - ORCL: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:07:14,187 - DEBUG -    Entering get()
2024-09-21 13:07:14,187 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/ORCL
2024-09-21 13:07:14,188 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:07:14,188 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:07:14,189 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:07:14,189 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:07:14,189 - DEBUG - reusing cookie
2024-09-21 13:07:14,189 - DEBUG - reusing crumb
2024-09-21 13:07:14,190 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:07:14,190 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:07:14,328 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/ORCL?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:07:14,332 - DEBUG - response code=200
2024-09-21 13:07:14,332 - DEBUG -    Exiting get()
2024-09-21 13:07:14,343 - DEBUG - ORCL: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:02
2024-09-21 13:07:14,347 - DEBUG - ORCL: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:02-04:00
2024-09-21 13:07:14,358 - DEBUG - ORCL: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:07:14,362 - DEBUG - ORCL: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:07:14,362 - DEBUG -   Exiting history()
2024-09-21 13:07:14,362 - DEBUG -  Exiting history()
2024-09-21 13:07:14,363 - DEBUG - Exiting download()
2024-09-21 13:07:14,364 - DEBUG - Running function: percentage_difference()
2024-09-21 13:07:14,364 - DEBUG - Running function: is_need_buy()
2024-09-21 13:07:14,365 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:07:14,365 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:07:14,366 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:07:14,402 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:07:14,404 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:07:14,576 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:07:14,586 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:07:15,130 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:07:15,138 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:07:15,446 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:07:15,669 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:07:15,921 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:07:16,186 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:07:16,945 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:07:16,950 - DEBUG - Running function: maRule()
2024-09-21 13:07:16,952 - DEBUG - Running function: yahoo_finance_get_stock_values()
2024-09-21 13:07:16,952 - DEBUG - Entering download()
2024-09-21 13:07:16,953 - DEBUG - Disabling multithreading because DEBUG logging enabled
2024-09-21 13:07:16,954 - DEBUG -  Entering history()
2024-09-21 13:07:16,956 - DEBUG - ('SELECT "t1"."key", "t1"."value" FROM "_kv" AS "t1" WHERE ("t1"."key" = ?) LIMIT ? OFFSET ?', ['ASML', 1, 0])
2024-09-21 13:07:16,958 - DEBUG -   Entering _fetch_ticker_tz()
2024-09-21 13:07:16,959 - DEBUG -    Entering get()
2024-09-21 13:07:16,960 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/ASML
2024-09-21 13:07:16,961 - DEBUG - params=frozendict.frozendict({'range': '1d', 'interval': '1d'})
2024-09-21 13:07:16,963 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:07:16,963 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:07:16,963 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:07:16,963 - DEBUG - reusing cookie
2024-09-21 13:07:16,963 - DEBUG - reusing crumb
2024-09-21 13:07:16,963 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:07:16,964 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:07:17,093 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/ASML?range=1d&interval=1d&crumb=p0LI8r.C.zN HTTP/11" 200 1216
2024-09-21 13:07:17,095 - DEBUG - response code=200
2024-09-21 13:07:17,096 - DEBUG -    Exiting get()
2024-09-21 13:07:17,097 - DEBUG -   Exiting _fetch_ticker_tz()
2024-09-21 13:07:17,097 - DEBUG - ('BEGIN', None)
2024-09-21 13:07:17,100 - DEBUG - ('INSERT INTO "_kv" ("key", "value") VALUES (?, ?)', ['ASML', 'America/New_York'])
2024-09-21 13:07:17,111 - DEBUG -   Entering history()
2024-09-21 13:07:17,112 - DEBUG - ASML: Yahoo GET parameters: {'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:07:17,113 - DEBUG -    Entering get()
2024-09-21 13:07:17,114 - DEBUG - url=https://query2.finance.yahoo.com/v8/finance/chart/ASML
2024-09-21 13:07:17,114 - DEBUG - params={'range': '1y', 'interval': '1d', 'includePrePost': False, 'events': 'div,splits,capitalGains'}
2024-09-21 13:07:17,115 - DEBUG -     Entering _get_cookie_and_crumb()
2024-09-21 13:07:17,115 - DEBUG - cookie_mode = 'basic'
2024-09-21 13:07:17,116 - DEBUG -      Entering _get_cookie_and_crumb_basic()
2024-09-21 13:07:17,117 - DEBUG - reusing cookie
2024-09-21 13:07:17,117 - DEBUG - reusing crumb
2024-09-21 13:07:17,118 - DEBUG -      Exiting _get_cookie_and_crumb_basic()
2024-09-21 13:07:17,118 - DEBUG -     Exiting _get_cookie_and_crumb()
2024-09-21 13:07:17,246 - DEBUG - https://query2.finance.yahoo.com:443 "GET /v8/finance/chart/ASML?range=1y&interval=1d&includePrePost=False&events=div%2Csplits%2CcapitalGains&crumb=p0LI8r.C.zN HTTP/11" 200 None
2024-09-21 13:07:17,248 - DEBUG - response code=200
2024-09-21 13:07:17,248 - DEBUG -    Exiting get()
2024-09-21 13:07:17,251 - DEBUG - ASML: yfinance received OHLC data: 2023-09-21 13:30:00 -> 2024-09-20 20:00:02
2024-09-21 13:07:17,252 - DEBUG - ASML: OHLC after cleaning: 2023-09-21 09:30:00-04:00 -> 2024-09-20 16:00:02-04:00
2024-09-21 13:07:17,260 - DEBUG - ASML: OHLC after combining events: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:07:17,264 - DEBUG - ASML: yfinance returning OHLC: 2023-09-21 00:00:00-04:00 -> 2024-09-20 00:00:00-04:00
2024-09-21 13:07:17,264 - DEBUG -   Exiting history()
2024-09-21 13:07:17,264 - DEBUG -  Exiting history()
2024-09-21 13:07:17,265 - DEBUG - Exiting download()
2024-09-21 13:07:17,267 - DEBUG - Running function: percentage_difference()
2024-09-21 13:07:17,267 - DEBUG - Running function: is_need_buy()
2024-09-21 13:07:17,267 - DEBUG - Running function: writeToLogfile()
2024-09-21 13:07:17,267 - DEBUG - Running function: googlesheets_add_history()
2024-09-21 13:07:17,269 - DEBUG - Converted retries value: 3 -> Retry(total=3, connect=None, read=None, redirect=None, status=None)
2024-09-21 13:07:17,300 - DEBUG - Making request: POST https://oauth2.googleapis.com/token
2024-09-21 13:07:17,301 - DEBUG - Starting new HTTPS connection (1): oauth2.googleapis.com:443
2024-09-21 13:07:17,447 - DEBUG - https://oauth2.googleapis.com:443 "POST /token HTTP/11" 200 None
2024-09-21 13:07:17,452 - DEBUG - Starting new HTTPS connection (1): www.googleapis.com:443
2024-09-21 13:07:17,990 - DEBUG - https://www.googleapis.com:443 "GET /drive/v3/files?q=mimeType%3D%22application%2Fvnd.google-apps.spreadsheet%22+and+name+%3D+%22pythoninvesttest%22&pageSize=1000&supportsAllDrives=True&includeItemsFromAllDrives=True&fields=kind%2CnextPageToken%2Cfiles%28id%2Cname%2CcreatedTime%2CmodifiedTime%29 HTTP/11" 200 None
2024-09-21 13:07:17,994 - DEBUG - Starting new HTTPS connection (1): sheets.googleapis.com:443
2024-09-21 13:07:18,301 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:07:18,983 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs?includeGridData=false HTTP/11" 200 None
2024-09-21 13:07:19,698 - DEBUG - https://sheets.googleapis.com:443 "GET /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27%21A1?valueRenderOption=FORMATTED_VALUE HTTP/11" 200 None
2024-09-21 13:07:19,976 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs/values/%27investHistoryCommands%27:append?valueInputOption=RAW&includeValuesInResponse=False HTTP/11" 200 None
2024-09-21 13:07:20,745 - DEBUG - https://sheets.googleapis.com:443 "POST /v4/spreadsheets/145XbaO5qCsmMA8sSTHI5YX5m3Qo5LbeH1QBBslRpKGs:batchUpdate HTTP/11" 200 None
2024-09-21 13:07:20,750 - DEBUG - Running function: update_stocks_input_list()
2024-09-21 13:07:20,760 - INFO - Connecting to 127.0.0.1:7497 with clientId 1...
2024-09-21 13:07:22,805 - INFO - Disconnecting
2024-09-21 13:07:22,806 - ERROR - API connection failed: ConnectionRefusedError(22, 'The remote computer refused the network connection', None, 1225, None)
2024-09-21 13:07:22,806 - ERROR - Make sure API port on TWS/IBG is open
2024-09-21 13:28:35,742 - INFO - Connecting to 127.0.0.1:7497 with clientId 1...
2024-09-21 13:28:37,789 - INFO - Disconnecting
2024-09-21 13:28:37,791 - ERROR - API connection failed: ConnectionRefusedError(22, 'The remote computer refused the network connection', None, 1225, None)
2024-09-21 13:28:37,791 - ERROR - Make sure API port on TWS/IBG is open
2024-09-21 13:43:26,020 - INFO - Connecting to 127.0.0.1:7497 with clientId 1...
2024-09-21 13:43:28,068 - INFO - Disconnecting
2024-09-21 13:43:28,068 - ERROR - API connection failed: ConnectionRefusedError(22, 'The remote computer refused the network connection', None, 1225, None)
2024-09-21 13:43:28,068 - ERROR - Make sure API port on TWS/IBG is open
2024-09-21 13:49:40,111 - INFO - Connecting to 127.0.0.1:7497 with clientId 1...
2024-09-21 13:49:42,147 - INFO - Disconnecting
2024-09-21 13:49:42,147 - ERROR - API connection failed: ConnectionRefusedError(22, 'The remote computer refused the network connection', None, 1225, None)
2024-09-21 13:49:42,147 - ERROR - Make sure API port on TWS/IBG is open
2024-09-21 14:15:35,769 - INFO - Connecting to 127.0.0.1:7497 with clientId 1...
2024-09-21 14:15:37,815 - INFO - Disconnecting
2024-09-21 14:15:37,816 - ERROR - API connection failed: ConnectionRefusedError(22, 'The remote computer refused the network connection', None, 1225, None)
2024-09-21 14:15:37,816 - ERROR - Make sure API port on TWS/IBG is open
